<view class="page-container">
  <t-navbar title="" left-arrow="{{false}}" style="--td-navbar-bg-color: transparent;" />

  <view class="section-mood">
    <view class="header-title">Check-in ğŸ‘‹</view>
    <scroll-view scroll-x class="mood-scroll" enable-flex>
      <view class="mood-pill {{currentMood==='happy'?'active':''}}" bind:tap="setMood" data-m="happy">
        <text class="emoji">ğŸ˜†</text> <text class="txt">å¼€å¿ƒ</text>
      </view>
      <view class="mood-pill {{currentMood==='calm'?'active':''}}" bind:tap="setMood" data-m="calm">
        <text class="emoji">ğŸ§˜</text> <text class="txt">å¹³é™</text>
      </view>
      <view class="mood-pill {{currentMood==='tired'?'active':''}}" bind:tap="setMood" data-m="tired">
        <text class="emoji">ğŸ˜«</text> <text class="txt">ç´¯äº†</text>
      </view>
    </scroll-view>
  </view>

  <view class="section-ring flex-center">
    <view class="ring-wrapper active-scale" bind:tap="handleStartReview">
      <view class="ring-fill" style="--ringProgress: {{reviewProgress}};"></view>
      <view class="ring-inner flex-center">
        <view class="inner-content">
          <text class="count">{{pendingReviewCount}}</text>
          <text class="label">å¾…å¤ä¹ </text>
        </view>
      </view>
    </view>

    <button class="btn-3d-green active-scale" bind:tap="handleStartReview">START REVIEW</button>
  </view>

  <view class="section-stats flex-between">
    <view class="stat-card yellow-theme">
      <view class="icon-box">ğŸ”¥</view>
      <view class="info">
        <view class="val">{{streakDays}}</view>
        <view class="lbl">Day Streak</view>
      </view>
    </view>
    <view class="stat-card purple-theme">
      <view class="icon-box">ğŸ’</view>
      <view class="info">
        <view class="val">{{todayXp}}</view>
        <view class="lbl">XP Points</view>
      </view>
    </view>
  </view>

  <view class="rank-card" wx:if="{{rankTop && rankTop.length}}">
    <view class="rank-title">å…¨æœå­¦éœ¸æ¦œ</view>
    <view class="rank-list">
      <view class="rank-item" wx:for="{{rankTop}}" wx:key="openid">
        <view class="rank-left">
          <text class="rank-index">{{index + 1}}</text>
          <view class="rank-avatar">
            <image wx:if="{{item.avatarUrl}}" class="avatar-img" src="{{item.avatarUrl}}" mode="aspectFill" />
            <view wx:else class="avatar-fallback">{{item.initial || 'U'}}</view>
          </view>
          <text class="rank-name">{{item.nickname}}</text>
        </view>
        <text class="rank-xp">{{item.xp}}</text>
      </view>
    </view>
    <view class="rank-me" wx:if="{{myRank}}">
      æˆ‘çš„æ’åï¼š{{myRank}}
    </view>
  </view>
</view>


