<view
  class="lc-root {{theme === 'dark' ? 'lc-theme-dark' : ''}}"
  style="--lc-status-bar: {{statusBarRpx}}rpx; --lc-safe-bottom: {{safeBottomRpx}}rpx;"
>
  <view class="lc-header">
    <view class="lc-header-inner">
      <text class="lc-header-title">LearnCards</text>
      <button class="lc-icon-btn" bind:tap="onToggleTheme">
        <text style="font-size: 34rpx; color: var(--lc-text-muted);">{{theme === 'dark' ? '☀' : '☾'}}</text>
      </button>
    </view>
  </view>

  <view class="lc-main">
    <view class="lc-container">
      <view class="title-block">
        <view class="lc-h1">Settings</view>
      </view>

      <view wx:if="{{isLoading}}" class="lc-inline-loading" style="padding: 24rpx 0;">
        <view class="lc-mini-spinner" />
        <text class="lc-p">Loading...</text>
      </view>

      <!-- User Stats Card -->
      <view class="stats-hero">
        <view class="hero-top">
          <view class="hero-cell">
            <view class="hero-label">Total Points</view>
            <view class="hero-value">{{pointsText}}</view>
          </view>
          <view class="hero-cell right">
            <view class="hero-label">Global Rank</view>
            <view class="hero-value">#{{globalRank}}</view>
          </view>
        </view>

        <view class="hero-bottom">
          <view class="mini">
            <view class="mini-label">Streak</view>
            <view class="mini-value">{{streak}} days</view>
          </view>
          <view class="mini">
            <view class="mini-label">Total Cards</view>
            <view class="mini-value">{{cardCount}}</view>
          </view>
          <view class="mini">
            <view class="mini-label">Today</view>
            <view class="mini-value">{{cardsStudiedToday}}/{{dailyGoal}}</view>
          </view>
        </view>
      </view>

      <!-- Settings Groups -->
      <view class="group">
        <view class="group-title">Account</view>
        <view class="group-card">
          <view class="row" bind:tap="onRequestUserProfile">
            <t-icon name="user" size="36rpx" color="var(--lc-text-muted)" />
            <text class="row-label">Profile</text>
            <text class="row-value">Student</text>
            <t-icon name="chevron-right" size="36rpx" color="var(--lc-text-subtle)" />
          </view>
          <view class="row" bind:tap="onToggleNotifications">
            <t-icon name="notification" size="36rpx" color="var(--lc-text-muted)" />
            <text class="row-label">Notifications</text>
            <text class="row-value">{{notifications ? 'Enabled' : 'Disabled'}}</text>
            <t-icon name="chevron-right" size="36rpx" color="var(--lc-text-subtle)" />
          </view>
        </view>
      </view>

      <view class="group">
        <view class="group-title">Appearance</view>
        <view class="group-card">
          <view class="row" bind:tap="onToggleTheme">
            <t-icon name="star" size="36rpx" color="var(--lc-text-muted)" />
            <text class="row-label">Dark Mode</text>
            <text class="row-value">{{theme === 'dark' ? 'On' : 'Off'}}</text>
            <t-icon name="chevron-right" size="36rpx" color="var(--lc-text-subtle)" />
          </view>
        </view>
      </view>

      <view class="group">
        <view class="group-title">Data & Privacy</view>
        <view class="group-card">
          <view class="row" bind:tap="onPrivacyPolicy">
            <t-icon name="lock-on" size="36rpx" color="var(--lc-text-muted)" />
            <text class="row-label">Privacy Policy</text>
            <t-icon name="chevron-right" size="36rpx" color="var(--lc-text-subtle)" />
          </view>
          <view class="row" bind:tap="onExportData">
            <t-icon name="download" size="36rpx" color="var(--lc-text-muted)" />
            <text class="row-label">Export Data</text>
            <t-icon name="chevron-right" size="36rpx" color="var(--lc-text-subtle)" />
          </view>
        </view>
      </view>

      <!-- Disclaimer -->
      <view class="disclaimer">
        <view class="disclaimer-title">⚠️ Privacy Notice</view>
        <view class="disclaimer-text">
          This app is designed for educational purposes. Do not store personally identifiable information (PII) or
          sensitive data in your study cards.
        </view>
      </view>

      <!-- Sign Out -->
      <button class="signout" bind:tap="onSignOut">
        <t-icon name="logout" size="36rpx" color="var(--lc-danger)" />
        <text style="margin-left: 12rpx;">Sign Out</text>
      </button>

      <view class="version">Version {{version}}</view>
    </view>
  </view>
</view>
