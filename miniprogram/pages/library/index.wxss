/* 页面布局 */
.library-header {
  padding: 20rpx 40rpx;
}

/* 网格布局：两列 */
.deck-grid {
  display: grid;
  grid-template-columns: 1fr 1fr; /* 两列等宽 */
  gap: 32rpx; /* 间距 */
  padding: 20rpx 32rpx;
}

/* --- 新建卡组 (虚线框) --- */
.deck-item.add-new {
  height: 360rpx;
}
.dashed-box {
  width: 100%; height: 100%;
  border: 4rpx dashed var(--c-border);
  border-radius: var(--r-base);
  display: flex; flex-direction: column;
  align-items: center; justify-content: center;
  background: rgba(255,255,255,0.5);
  transition: all 0.1s;
}
.dashed-box:active { background: rgba(0,0,0,0.05); }
.add-text {
  font-size: 28rpx; color: var(--c-text-light); font-weight: 700;
  margin-top: 16rpx;
}

/* --- 卡片堆叠核心样式 (Card Stack) --- */
.deck-item {
  position: relative;
  height: 360rpx; /* 固定高度 */
  z-index: 1;
}

.card-stack {
  position: relative;
  width: 100%; height: 100%;
}

/* 1. 最底下的那张纸 (伪元素) */
.card-stack::before {
  content: '';
  position: absolute;
  top: 12rpx; left: 12rpx; right: -12rpx; bottom: -12rpx; /* 向右下偏移 */
  background: #fff;
  border: 2rpx solid var(--c-text-title); /* 黑色描边 */
  border-radius: var(--r-base);
  z-index: -2;
  /* 稍微旋转一点，增加自然感 */
  transform: rotate(3deg);
  opacity: 0.5;
}

/* 2. 中间的那张纸 (伪元素) */
.card-stack::after {
  content: '';
  position: absolute;
  top: 6rpx; left: 6rpx; right: -6rpx; bottom: -6rpx;
  background: #fff;
  border: 2rpx solid var(--c-text-title);
  border-radius: var(--r-base);
  z-index: -1;
  transform: rotate(1.5deg);
}

/* 3. 最上面的主卡片 */
.stack-main {
  position: relative;
  width: 100%; height: 100%;
  background: #fff;
  border: 4rpx solid var(--c-text-title); /* 粗边框 */
  border-radius: var(--r-base);
  padding: 32rpx;
  box-sizing: border-box;
  display: flex; flex-direction: column; justify-content: space-between;
  transition: transform 0.1s;
  /* 加上硬投影 */
  box-shadow: 4rpx 4rpx 0 rgba(0,0,0,0.1); 
}

/* 点击时的按压效果 */
.deck-item:active .stack-main {
  transform: translate(6rpx, 6rpx); /* 向下按 */
}
.deck-item:active .card-stack::before,
.deck-item:active .card-stack::after {
  transform: none; /* 收起散开的纸 */
  transition: transform 0.1s;
}

/* --- 卡片内部内容 --- */
.deck-icon {
  width: 80rpx; height: 80rpx;
  border-radius: 50%;
  display: flex; align-items: center; justify-content: center;
  border: 2rpx solid var(--c-text-title);
  margin-bottom: 24rpx;
}

.deck-title {
  font-size: 32rpx; font-weight: 800; color: var(--c-text-title);
  margin-bottom: 12rpx;
  /* 限制两行 */
  display: -webkit-box; -webkit-box-orient: vertical; -webkit-line-clamp: 2; overflow: hidden;
}

.deck-meta {
  font-size: 22rpx; color: var(--c-text-light); font-weight: 600;
}

/* --- 颜色主题 (Academic Pop) --- */
/* 蓝色主题 */
.theme-blue .stack-main { background: var(--c-primary-light); }
.theme-blue .deck-icon { background: var(--c-primary); color: #fff; }

/* 橙色主题 */
.theme-orange .stack-main { background: var(--c-accent-light); }
.theme-orange .deck-icon { background: var(--c-accent); color: #fff; }

/* 绿色主题 */
.theme-green .stack-main { background: #E3F9E5; }
.theme-green .deck-icon { background: var(--c-success); color: #fff; }

/* 紫色主题 */
.theme-purple .stack-main { background: #F3E5F5; }
.theme-purple .deck-icon { background: #9C27B0; color: #fff; }
